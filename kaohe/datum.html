
    <style>
        body{
            background: #f1f1f1;
        }

        ::-webkit-scrollbar {display:none}
        .collapse{
            background: #fff;
        }
        .breadcrumb{
            background: #fff;
        }


        img{
            width: 20px;
            height: 20px;
        }
        span{
            width: 20px;
            height: 20px;
        }
        .panel-group .panel + .panel{
            margin: 0;
            border: none;

        }

        .panel{
            border: none;
        }
        .panel-default >.panel-heading:hover{
            padding-left: 10px;
        }
        .panel-default >.panel-heading:hover {

            border-left: 5px solid  #009688 ;
            color: #fff;

        }
        a:hover{
            text-decoration: none;
        }
        a:focus{
            text-decoration: none;
        }
        .panel-default >.panel-heading{
            height: 50px;
            border-radius: unset;
            background: #20222a;
            color: #999;

        }
        .left-a{
            font-size: 13px;
        }
        .left{

            height:auto;
            background: #20222a;
            position: fixed;
            bottom: 0;top: 0;
            padding-left: 0px;
            padding-right: 0px;

        }
        .top{

            position: fixed;
            z-index: 1040;
        }
        .nav-dh{
            position: fixed;
            top:55px;
            width: 100%;
            z-index: 1030;
        }
        h3{
            width: 200px;
            height: 50px;
            color: #999;
            font-size: 13px;
            text-align: center;
            font-weight: bold;
            line-height: 30px;
        }
        .index-son{
            background: #000;
            color: #999;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            font-size: 12px;
            opacity: 0.9;
        }
        .index-son>p{
            height: 30px;
            line-height: 30px;

        }
        .index-son>p:hover{
            background: #009688 ;


        }
        .index-son>p a{
            color:#999;
            margin-left: 48px;


        }
        .index-son>p a:hover{
            color: #fff;
        }
        .sjx>.sj{
            transform: rotate(180deg);
        }

        .row{
            margin-left: 0px;
            margin-right: 0px;
            padding-left: 0px;
            padding-right: 0px;
        }
        .navbar a>img{
            width: 20px;
            height: 20px;
        }


        .xian{
            margin-left: 17px;
            width: 0px;
            border-top: solid 2px #000;
            height: 0px;
            display: block;
        }











        .form-horizontal .control-label{
            text-align: center;
        }

        .gdt1 th:nth-of-type(1){
            width: 40px;


        }


        .gdt1 th:nth-of-type(2){
            width: 80px;
            text-align: center;

        }
        .gdt1 th:nth-of-type(4){
            width: 80px;
        }
        .gdt1 th:nth-of-type(7){
            width: 80px;
        }

        .gdt1 th{
            width: 140px;
        }

        .containe{
            height:auto;
            background: #fff;
            position: absolute;
            top:106px;
            border-left:10px solid #f1f1f1;
            border-right:10px solid #f1f1f1;
            border-bottom:30px solid #f1f1f1;
        }



        h5{
            color: #000;
            width: 100%;
            height: 50px;
            line-height: 50px;
            border-bottom: 1px solid #f2f2f2;
            font-size: 13px;
        }

        .btn1{
            margin-left: 120px;
            margin-top: 30px;
            margin-bottom: 40px;
        }
        .btn2{
            margin-left: 15px;
            margin-top: 30px;
            margin-bottom: 40px;

        }

        .control-label{
            font-size:12px;
            color: #333;
            font-weight: 400;
        }
        .mg3{
            margin-left: 15px;
        }

        #bs{
            background: #009688 ;
        }
        #bs>a{
            color:#fff;

        }
        .input-append>img{
            width: 50px;
            height: 50px;
        }
    </style>







<div class="row col-xs-12 col-sm-12 col-md-10 col-md-push-2 nav-dh  ">
    <ul class="breadcrumb">
        <li><a href="#">主页</a></li>
        <li><a href="#">设置</a></li>
        <li class="active">基本资料</li>
    </ul>
</div>

    <div class="row col-xs-12">
        <h5>设置我的基本资料</h5>
        <form class="form-horizontal" role="form">
            <div class="form-group">
                <label  class="col-sm-1 control-label">我的角色</label>
                <div class="col-sm-2">
                    <select class="form-control "id="role">
                        <option>超级管理员</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-1 control-label">用户名</label>
                <div class="col-sm-2">
                    <input type="text" class="form-control" id="petName" placeholder="">
                </div>
            </div>
            <div class="form-group">
                <label  class="col-sm-1 control-label">昵称</label>
                <div class="col-sm-2">
                    <input type="text" class="form-control" id="username" placeholder="">
                </div>
            </div>
            <div class="form-group" id="sex">
                <label class="col-sm-1 control-label">性别</label>
                <label class="radio-inline mg3">
                    <input type="radio" name="optionsRadiosinline" id="optionsRadios3" value="option1" checked> 男
                </label>
                <label class="radio-inline">
                    <input type="radio" name="optionsRadiosinline" id="optionsRadios4"  value="option2"> 女
                </label>
            </div>
            <div class="form-group">
                <label class="col-sm-1 control-label">头像</label>
                <div class="col-sm-1">
                    <input id="lefile" type="file" style="display:none">
                    <div class="input-append">
                        <input id="headimg" class="input-large form-control" type="hidden" style="height:30px;" >
                        <img src="" alt="" width="100" height="100" id="img">
                    </div>
                </div>
                <button for="Headimg" onclick="$('input[id=lefile]').click();"   type="button" class="btn btn-primary" style="background:#009688">
                    上传图片
                </button>
                <script type="text/javascript">
                    $('input[id=lefile]').change(function() {
                        $('#headimg').val($(this).val());
                    });
                </script>
            </div>
            <div class="form-group">
                <label  class="col-sm-1 control-label">手机</label>
                <div class="col-sm-2">
                    <input type="text" class="form-control" id="phone" placeholder="">
                </div>
            </div>
            <div class="form-group">
                <label  class="col-sm-1 control-label">邮箱</label>
                <div class="col-sm-2">
                    <input type="text" class="form-control" id="email" placeholder="">
                </div>
            </div>

            <div class="form-group">
                <label  class="col-sm-1 control-label">备注</label>
                <div class="col-sm-10">
                    <textarea class="form-control" rows="12"></textarea>
                </div>
            </div>
            <button type="button" class="btn btn-info btn1" id="go">确认保存</button>
            <button type="button" class="btn btn-default btn2">重新填写</button>
        </form>



    </div>


<script>
    $("#lefile").on('change',function(){
        getbase64();
    })

    function getbase64() {
        var file = $('#lefile')[0].files[0];
        reader = new FileReader();
        reader.onload = function(){
            var ImgFileSize = reader.result.substring(reader.result.indexOf(",") + 1)
            $('#headimg').val(reader.result);
            $('#img').attr('src',reader.result)

        }
        reader.readAsDataURL(file);
    }
    $('.navbar a').mouseenter(function () {

        $(this).prev().animate({
            width:'15px',
            height:'2px',

        },200)
    })
    $('.navbar a').mouseleave(function () {

        $(this).prev().animate({
            width:'0px', height:'2px',

        },200)

    })



    $.post('./sql/user.php',function(text){
        var json;
        if(typeof text === 'string'){
            json = $.parseJSON(text);
        }else if(typeof text === 'object'){
            json = text;
        }
        $.each(json,function(index,value){
            var roleId=value.roleId;
            if(roleId=="1"){
                $('#petName').val(value.petName);
                $('#username').val(value.username);
                $('#sex').val(value.sex);
                $('#phone').val(value.phone);
                $('#email').val(value.email);
                $('#img').attr('src','sql/'+value.headimg)
            }


        })
    })

    var reg = /^[a-zA-Z0-9_]{0,}$/;
    var reg2 = /^[0-9]{0,}$/;
    var reg1=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;
    var cn=/[\u4e00-\u9fa5]/;

    $('#go').click(function (e) {
        e.preventDefault()
        if($('#phone')[0].value.match(reg2)&&$('#phone').val().length=='11'&&$('#email')[0].value.match(reg1)){
            $.ajax({
                type:"post",
                url:"./sql/datum3.php",
                data:{
                    role:$('#role').val(),
                    petName:$('#petName').val(),
                    username:$('#username').val(),
                    sex:$('#sex').val(),
                    phone:$('#phone').val(),
                    email:$('#email').val(),
                    headimg:$('#headimg').val()


                },
                success:function (text,statys,xhr) {
                    var t = $.parseJSON(text);
                    alert(t.message)
                },
                error:function (text,statys,xhr) {

                }
            })
        }else if($('#phone').val()==''){
            alert('手机号不能为空')
        }else if($('#email').val()==''){
            alert('邮箱不能为空')
        }else if ($('#email')[0].value.match(reg)||$('#email')[0].value.match(cn)){
            alert('邮箱格式有误')
        }else if ($('#phone').val().length!='11'||$('#phone')[0].value.match(reg)||$('#phone')[0].value.match(cn)){
            alert('手机号格式有误')

        }



    })



</script>
